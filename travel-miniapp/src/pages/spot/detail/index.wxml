<view class="spot-detail-page" wx:if="{{!loading && spot}}">
  <!-- å›¾ç‰‡è½®æ’­ -->
  <view class="image-section">
    <swiper class="image-swiper" indicator-dots autoplay circular bindchange="onSwiperChange">
      <swiper-item wx:for="{{spot.images}}" wx:key="index">
        <image class="swiper-image" src="{{item}}" mode="aspectFill" data-url="{{item}}" bindtap="previewImage" />
      </swiper-item>
    </swiper>
    <view class="image-counter">{{currentImageIndex + 1}}/{{spot.images.length}}</view>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯ -->
  <view class="info-section">
    <view class="spot-header">
      <text class="spot-name">{{spot.name}}</text>
      <view class="favorite-btn" bindtap="toggleFavorite">
        <text class="favorite-icon">{{spot.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      </view>
    </view>
    <view class="spot-tags">
      <text class="tag">{{spot.regionName}}</text>
      <text class="tag">{{spot.categoryName}}</text>
    </view>
    <view class="spot-rating">
      <text class="star">â­</text>
      <text class="rating-value">{{spot.avgRating || '-'}}</text>
      <text class="rating-count">({{spot.ratingCount || 0}}æ¡è¯„ä»·)</text>
    </view>
    <view class="spot-price">
      <text class="price-label">é—¨ç¥¨</text>
      <text class="price-value">Â¥{{spot.price}}</text>
    </view>
  </view>

  <!-- è¯¦ç»†ä¿¡æ¯ -->
  <view class="detail-section">
    <view class="detail-item" bindtap="openNavigation">
      <text class="detail-icon">ğŸ“</text>
      <text class="detail-text">{{spot.address}}</text>
      <text class="detail-action">å¯¼èˆª</text>
    </view>
    <view class="detail-item" wx:if="{{spot.openTime}}">
      <text class="detail-icon">ğŸ•</text>
      <text class="detail-text">{{spot.openTime}}</text>
    </view>
  </view>

  <!-- æ™¯ç‚¹ç®€ä»‹ -->
  <view class="desc-section" wx:if="{{spot.description}}">
    <text class="section-title">æ™¯ç‚¹ç®€ä»‹</text>
    <text class="desc-content">{{spot.description}}</text>
  </view>

  <!-- ç”¨æˆ·è¯„ä»· -->
  <view class="comment-section" wx:if="{{spot.latestComments && spot.latestComments.length > 0}}">
    <text class="section-title">ç”¨æˆ·è¯„ä»·</text>
    <view class="comment-list">
      <view class="comment-item" wx:for="{{spot.latestComments}}" wx:key="id">
        <image class="comment-avatar" src="{{item.avatar || '/images/default-avatar.png'}}" />
        <view class="comment-content">
          <view class="comment-header">
            <text class="comment-nickname">{{item.nickname}}</text>
            <view class="comment-rating">
              <text wx:for="{{item.score}}" wx:for-item="s" wx:key="s">â­</text>
            </view>
          </view>
          <text class="comment-text">{{item.comment}}</text>
          <text class="comment-time">{{item.createdAt}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="bottom-left">
      <view class="bottom-action" bindtap="toggleFavorite">
        <text class="action-icon">{{spot.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="action-text">æ”¶è—</text>
      </view>
      <view class="bottom-action" bindtap="openNavigation">
        <text class="action-icon">ğŸ“</text>
        <text class="action-text">å¯¼èˆª</text>
      </view>
    </view>
    <button class="order-btn" bindtap="goToOrder">ç«‹å³é¢„è®¢ Â¥{{spot.price}}</button>
  </view>
</view>

<view class="loading" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
